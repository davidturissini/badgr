<!DOCTYPE html>
<html>
	<head>
		<title>Badgr prototype</title>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
		<script src="/scripts/lib/underscore.js"></script>
		<script src="/scripts/lib/backbone.js"></script>
		<script src="/scripts/lib/require.js"></script>
		<script>
			require.config({
				baseUrl:'/scripts',
				paths: {
    				backbone: 'lib/backbone',
    				underscore: 'lib/underscore',
    				jQuery: 'lib/jQuery'
			    },
			    shim: {
				    'underscore': {
				      exports: '_'
				    },
				    'backbone': {
				      deps: ["underscore"],
				      exports: 'Backbone'
				    },
				    'jQuery': {
				    	exports:'jQuery'
				    }
				}
			})
		</script>
	</head>
	<body>
		<form id="user-register-form" action="/users" method="post">
			<input id="user-register-form-name" type="text" name="name" placeholder="Name" />
			<input type="submit" />
		</form>
		<script>
			jQuery(document).ready(function () {
				var formEl = document.getElementById('user-register-form');
				var userNameFieldEl = document.getElementById('user-register-form-name');
				require(['models/User'], function (User) {
					console.log(User);
				});
				

				formEl.addEventListener('submit', function (e) {
					e.preventDefault();
					
					$.ajax({
						url:'/users',
						type:'post',
						data:{
							name:userNameFieldEl.value
						}
					})

					.then(function (e) {
						console.log(e);
					})

				});

			});
		</script>
	</body>
</html>